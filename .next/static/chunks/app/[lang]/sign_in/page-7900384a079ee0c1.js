(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[985],{2480:function(){},4019:function(e,t,r){Promise.resolve().then(r.bind(r,1150))},5707:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return x},default:function(){return v}});var s=r(7437),n=r(2265),a=r(9687),o=r(8688),l=r(3014),c=r(4033),u=r(4177);let i="auth_token",d="user",m=()=>{try{return u.Z.getItem(i)}catch(e){console.log("Error getting the Auth Token",e)}},g=()=>{try{return u.Z.getItem(d)}catch(e){console.log("Error getting the Auth Token",e)}};var h={getToken:()=>{let e=m();return e||null},storeToken:e=>{try{u.Z.setItem(i,e)}catch(e){console.log("Error storing the Auth Token",e)}},removeToken:()=>{try{u.Z.removeItem(i)}catch(e){console.log("Error removing the auth token",e)}},getUser:()=>{let e=g();return e||null},storeUser:e=>{try{u.Z.setItem(d,e)}catch(e){console.log("Error storing the Auth Token",e)}},removeUser:()=>{try{u.Z.removeItem(d)}catch(e){console.log("Error removing the auth token",e)}}};let p=(0,n.createContext)(void 0),x=e=>{let{children:t}=e,r=(0,c.useRouter)(),u=h.getUser(),i=h.getToken(),[d,m]=(0,n.useState)(u||null),[g,x]=(0,n.useState)(i||null),v=async(e,t)=>{await a.Z.auth.signin({username:e,password:t}).then(e=>{h.storeToken(e.data),x(e.data),a.Z.users.retrieve(e.data.id).then(e=>{h.storeUser(e.data),m(e.data),e.data.lang?r.push("/".concat(e.data.lang)):r.push("/")}).catch(e=>{console.error((0,o.e)(e)),(0,l.toast)((0,o.e)(e),{hideProgressBar:!0,autoClose:2e3,type:"error"})})}).catch(e=>{console.error((0,o.e)(e)),(0,l.toast)((0,o.e)(e),{hideProgressBar:!0,autoClose:2e3,type:"error"})})};return(0,s.jsx)(p.Provider,{value:{user:d,jwt:g,login:v,logout:()=>{h.removeToken(),h.removeUser(),x(null),m(null)},updateUser:e=>{h.removeUser(),h.storeUser(e),m(e)}},children:t})};var v=p},1150:function(e,t,r){"use strict";r.r(t);var s=r(7437),n=r(2265),a=r(6230),o=r(5691),l=r(9619),c=r(2563),u=r(6554),i=r(6753),d=r(1396),m=r.n(d),g=r(5707),h=r(4033),p=r(1469);t.default=e=>{let{lang:t,dictionary:r}=e,d=o.Ry({username:o.Z_().required(r.validation.username_required),password:o.Z_().min(4).required(r.validation.password_required)}),[x,v]=(0,n.useState)(!1),f=(0,h.useRouter)(),T=(0,n.useContext)(g.default);(null==T?void 0:T.user)&&f.push("/".concat(t));let y=async(e,r)=>{let{setSubmitting:s}=r;v(!0),null==T||T.login(e.username,e.password),v(!1),(null==T?void 0:T.user)&&f.push("/".concat(t)),s(!1)};return(0,s.jsx)(a.J9,{initialValues:{username:"",password:""},validationSchema:d,onSubmit:y,children:x?(0,s.jsx)(p.Z,{}):(0,s.jsx)(a.l0,{children:(0,s.jsxs)("div",{className:"justify-center",children:[(0,s.jsx)("div",{className:"flex py-20 justify-center",children:(0,s.jsx)(l.Z,{title:r.headers.sign_in,size:"xs",className:"text-gray-600"})}),(0,s.jsxs)("div",{className:"relative p-6 flex-auto",children:[(0,s.jsx)(a.gN,{as:c.Z,name:"username",placeholder:r.main.username,label:r.main.username}),(0,s.jsx)(a.Bc,{name:"username",component:"div",className:"text-red-500 text-xs"})]}),(0,s.jsxs)("div",{className:"relative p-6 flex-auto",children:[(0,s.jsx)(a.gN,{as:c.Z,name:"password",type:"password",placeholder:r.main.password,label:r.main.password}),(0,s.jsx)(a.Bc,{name:"password",component:"div",className:"text-red-500 text-xs"})]}),(0,s.jsx)("div",{className:"flex items-center justify-center mt-3 p-6 rounded-b",children:(0,s.jsx)(u.z,{type:"submit",children:r.headers.sign_in})}),(0,s.jsxs)("div",{className:"flex items-center justify-center p-6 rounded-b",children:[(0,s.jsx)(m(),{href:"/".concat(t,"/sign_up"),className:"px-3",children:(0,s.jsx)(i.Z,{className:"text-blue-500 hover:cursor-pointer",children:r.headers.sign_up})}),(0,s.jsx)("div",{className:"w-1 h-1 bg-black rounded-full"}),(0,s.jsx)(m(),{href:"/".concat(t,"/forgot_pass"),className:"px-3",children:(0,s.jsx)(i.Z,{className:"text-blue-500 hover:cursor-pointer",children:r.main.forgotten_pass})})]}),(0,s.jsx)("div",{className:"flex items-center justify-center mt-3 p-6 rounded-b",children:(0,s.jsx)(i.Z,{className:"text-gray-700",children:r.main.sign_in_agree})})]})})})}},6554:function(e,t,r){"use strict";r.d(t,{d:function(){return c},z:function(){return u}});var s=r(7437),n=r(2265),a=r(306),o=r(6061),l=r(6264);let c=(0,o.j)("active:scale-95 inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 disabled:opacity-50 dark:focus:ring-slate-400 disabled:pointer-events-none dark:focus:ring-offset-slate-900",{variants:{variant:{default:"bg-gray-800 text-white hover:bg-gray-700",destructive:"text-white hover:bg-red-600",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",subtle:"bg-slate-100 text-slate-900 hover:bg-slate-200",ghost:"bg-transparent hover:bg-slate-100 data-[state=open]:bg-transparent",ghostNonHover:"bg-transparent data-[state=open]:bg-transparent",link:"bg-transparent underline-offset-4 text-slate-900 hover:bg-transparent"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-2 rounded-md",lg:"h-11 px-8 rounded-md",xs:"h-8 px-1 rounded-sm"}},defaultVariants:{variant:"default",size:"default"}}),u=n.forwardRef((e,t)=>{let{className:r,children:n,variant:o,isLoading:u,size:i,...d}=e;return(0,s.jsxs)("button",{className:(0,a.cn)(c({variant:o,size:i,className:r})),ref:t,disabled:u,...d,children:[u?(0,s.jsx)(l.Z,{className:"mr-2 h-4 w-4 animate-spin"}):null,n]})});u.displayName="Button"},2563:function(e,t,r){"use strict";var s=r(7437),n=r(2265),a=r(6061),o=r(306),l=r(6753);let c=(0,a.j)("block py-2.5 px-0 w-full text-sm text-gray-700 bg-transparent border-0 border-b-2 border-gray-200 appearance-none focus:outline-none focus:ring-0 focus:border-gray-500 peer");t.Z=n.forwardRef((e,t)=>{let{className:r,children:n,value:a,onChange:u,label:i,disabled:d,clearIcon:m,cleanStateToggle:g,lang:h,...p}=e;return(0,s.jsxs)("div",{className:"w-full",children:[i&&a&&(0,s.jsx)(l.Z,{children:i}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{className:(0,o.cn)(c({className:r})),ref:t,value:a,onChange:u,disabled:d,...p}),m&&(0,s.jsx)("button",{className:"absolute ".concat(h?"en"==h?"right-0":"left-0":"right-0"," top-1/2 transform -translate-y-1/2 text-gray-500 focus:outline-none"),onClick:()=>g(),children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 cursor-pointer",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11.414l3.536-3.536 1.414 1.414L11.414 10l3.536 3.536-1.414 1.414L10 11.414l-3.536 3.536-1.414-1.414L8.586 10 5.05 6.464l1.414-1.414L10 8.586l3.536-3.536 1.415 1.414z",clipRule:"evenodd"})})})]})]})})},6753:function(e,t,r){"use strict";var s=r(7437),n=r(2265),a=r(306);let o=n.forwardRef((e,t)=>{let{className:r,children:n,...o}=e;return(0,s.jsx)("label",{className:(0,a.cn)("text-sm text-gray-700",r),...o,children:n})});o.displayName="Label",t.Z=o},1469:function(e,t,r){"use strict";var s=r(7437);t.Z=()=>(0,s.jsxs)("div",{className:"loading-spinner",children:[(0,s.jsx)("div",{className:"spinner"}),"Loading..."]})},9619:function(e,t,r){"use strict";var s=r(7437);r(2265);var n=r(6061),a=r(306);let o=(0,n.j)("text-gray-800 text-center lg:text-left leading-tight tracking-tighter",{variants:{size:{default:"text-4xl md:text-5xl lg:text-6xl",lg:"text-5xl md:text-6xl lg:text-7xl",sm:"text-2xl md:text-3xl lg:text-4xl",xs:"text-1xl md:text-1xl lg:text-2xl",xxs:"text-sm md:text-sm lg:text-sm"}},defaultVariants:{size:"default"}});t.Z=e=>{let{title:t,numberCount:r,children:n,className:l,size:c,...u}=e;return(0,s.jsxs)("div",{className:"items-baseline flex",children:[(0,s.jsx)("h1",{...u,className:(0,a.cn)(o({size:c,className:l})),children:t}),r?(0,s.jsx)("h2",{className:"text-gray-500 text-2xl px-4",children:r}):null]})}},8688:function(e,t,r){"use strict";r.d(t,{e:function(){return s}});let s=e=>{var t,r;let s=null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message;return s[0].message&&(s=s[0].message),s||(s="Something went wrong, Please try again."),s}},306:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var s=r(7042),n=r(3986);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m)((0,s.W)(t))}},2706:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return a}});let s=r(1024),n=s._(r(2265)),a=n.default.createContext(null)},9687:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var s=r(2173);let n=s.Z.create({baseURL:"https://online.tveta.gov.af:8080/api"});function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a={method:e,withCredentials:!0,url:t,data:r,json:!0,headers:{}};return s&&(a.headers.Authorization="Bearer ".concat(s)),n(a)}var o={auth:{signin:e=>a("POST","/signin",e)},users:{createUser:e=>a("POST","/users",e),createModerator:(e,t)=>a("POST","/moderators",e,t),list:()=>a("GET","/users"),querySearchModerators(e){let t="/moderators?".concat(e);return a("GET",t)},querySearchMembers(e){let t="/members?".concat(e);return a("GET",t)},retrieve(e){let t="/users/".concat(e);return a("GET",t)},update(e,t){let r="/users/".concat(e);return a("POST",r,t)},delete(e){let t="/users/".concat(e);return a("DELETE",t)},userActivity(e){let t="/users/user-activity/".concat(e);return a("GET",t)},changePassword(e,t,r){let s="/users/change-pass/".concat(e);return a("POST",s,t,r)},addTagsToModerator(e,t,r){let s="/users/tags/".concat(e);return a("POST",s,t,r)},makeUserModerator(e,t){let r="/users/make-moderator/".concat(e);return a("PUT",r,t)},dismissModeratorUser(e,t){let r="/users/dismiss-moderator/".concat(e);return a("PUT",r,t)},removeTagsFromModerator(e,t,r){let s="/users/tags/remove/".concat(e);return a("POST",s,t,r)},emailSendForPasswordReset:e=>a("POST","/users/reset-password",e),resetPasswordByToken(e,t){let r="/users/reset-pass-token/".concat(e);return a("POST",r,t)},suspendUser(e,t,r){let s="/users/suspend/".concat(e);return a("PUT",s,t,r)},changeUserLang(e,t,r){let s="/users/change-lang/".concat(e);return a("PUT",s,t,r)}},tags:{create:(e,t)=>a("POST","/tags",e,t),list:()=>a("GET","/tags"),options(e){let t="/tag-options/".concat(e);return a("GET",t)},querySearch(e){let t="/query-tags?".concat(e);return a("GET",t)},retrieve(e){let t="/tags/".concat(e);return a("GET",t)},update:(e,t)=>a("PUT","/tags",e,t),delete(e){let t="/tags/".concat(e);return a("DELETE",t)}},reportTypes:{create:(e,t)=>a("POST","/report_types",e,t),options(e){let t="/report-type-options/".concat(e);return a("GET",t)},querySearch(e){let t="/query-report-types?".concat(e);return a("GET",t)},retrieve(e){let t="/report_types/".concat(e);return a("GET",t)},update:(e,t)=>a("PUT","/report_types",e,t),delete(e){let t="/report_types/".concat(e);return a("DELETE",t)}},reports:{create:(e,t)=>a("POST","/reports",e,t),querySearch(e){let t="/query-reports?".concat(e);return a("GET",t)},retrieve(e){let t="/reports/".concat(e);return a("GET",t)},update(e,t){let r="/reports/".concat(e);return a("POST",r,t)},delete(e,t){let r="/reports/".concat(e);return a("DELETE",r,{},t)},closeReport(e,t){let r="/reports/close/".concat(e);return a("PUT",r,{},t)}},discussions:{create:(e,t)=>(console.log(e,"data"),a("POST","/discussions",e,t)),list:()=>a("GET","/discussions"),querySearch(e){let t="/discussions?".concat(e);return a("GET",t)},retrieve(e){let t="/discussions/".concat(e);return a("GET",t)},update:(e,t)=>a("PUT","/discussions",e,t),delete(e,t){let r="/discussions/".concat(e);return a("DELETE",r,{},t)},lockDiscussion(e,t){let r="/discussions/lock/".concat(e);return a("PUT",r,{},t)},unlockDiscussion(e,t){let r="/discussions/unlock/".concat(e);return a("PUT",r,{},t)},fetchByTagId(e){let t="/discussions/tag/".concat(e);return a("GET",t)}},answers:{create:(e,t)=>a("POST","/answers",e,t),list:()=>a("GET","/answers"),retrieve(e){let t="/answers/".concat(e);return a("GET",t)},update:(e,t)=>a("PUT","/answers",e,t),delete(e,t){let r="/answers/".concat(e);return a("DELETE",r,{},t)},getVotes(e){let t="/answers/votes/".concat(e);return a("GET",t)}},comments:{create:(e,t)=>a("POST","/comments",e,t),list:()=>a("GET","/comments"),retrieve(e){let t="/comments/".concat(e);return a("GET",t)},update:(e,t)=>a("PUT","/comments",e,t),delete(e,t){let r="/comments/".concat(e);return a("DELETE",r,{},t)}},files:{uploadFiles:(e,t)=>a("POST","/upload",e,t),upload(e,t,r){let s="/upload/".concat(e);return a("POST",s,t,r)}},setting:{update:(e,t)=>a("PUT","/settings",e,t)},vote:{create:(e,t)=>a("POST","/votes",e,t),delete(e,t){let r="/votes/".concat(e);return a("DELETE",r,t)}}}}},function(e){e.O(0,[150,5,616,396,478,596,744],function(){return e(e.s=4019)}),_N_E=e.O()}]);