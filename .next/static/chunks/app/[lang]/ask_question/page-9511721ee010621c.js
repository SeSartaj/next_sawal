(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[971],{2480:function(){},6038:function(e,t,s){Promise.resolve().then(s.bind(s,6754))},5707:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthProvider:function(){return p},default:function(){return v}});var r=s(7437),a=s(2265),n=s(9687),l=s(8688),i=s(3014),o=s(4033),c=s(4177);let d="auth_token",u="user",m=()=>{try{return c.Z.getItem(d)}catch(e){console.log("Error getting the Auth Token",e)}},h=()=>{try{return c.Z.getItem(u)}catch(e){console.log("Error getting the Auth Token",e)}};var x={getToken:()=>{let e=m();return e||null},storeToken:e=>{try{c.Z.setItem(d,e)}catch(e){console.log("Error storing the Auth Token",e)}},removeToken:()=>{try{c.Z.removeItem(d)}catch(e){console.log("Error removing the auth token",e)}},getUser:()=>{let e=h();return e||null},storeUser:e=>{try{c.Z.setItem(u,e)}catch(e){console.log("Error storing the Auth Token",e)}},removeUser:()=>{try{c.Z.removeItem(u)}catch(e){console.log("Error removing the auth token",e)}}};let f=(0,a.createContext)(void 0),p=e=>{let{children:t}=e,s=(0,o.useRouter)(),c=x.getUser(),d=x.getToken(),[u,m]=(0,a.useState)(c||null),[h,p]=(0,a.useState)(d||null),v=async(e,t)=>{await n.Z.auth.signin({username:e,password:t}).then(e=>{x.storeToken(e.data),p(e.data),n.Z.users.retrieve(e.data.id).then(e=>{x.storeUser(e.data),m(e.data),e.data.lang?s.push("/".concat(e.data.lang)):s.push("/")}).catch(e=>{console.error((0,l.e)(e)),(0,i.toast)((0,l.e)(e),{hideProgressBar:!0,autoClose:2e3,type:"error"})})}).catch(e=>{console.error((0,l.e)(e)),(0,i.toast)((0,l.e)(e),{hideProgressBar:!0,autoClose:2e3,type:"error"})})};return(0,r.jsx)(f.Provider,{value:{user:u,jwt:h,login:v,logout:()=>{x.removeToken(),x.removeUser(),p(null),m(null)},updateUser:e=>{x.removeUser(),x.storeUser(e),m(e)}},children:t})};var v=f},6754:function(e,t,s){"use strict";s.r(t);var r=s(7437),a=s(2265),n=s(6230),l=s(5691),i=s(9911),o=s(6554),c=s(2563),d=s(35),u=s(9814),m=s(9687),h=s(5707),x=s(8688),f=s(3014),p=s(4033),v=s(1469),g=s(9619),j=s(6753),y=s(705);t.default=e=>{let{tags:t,lang:s,dictionary:b}=e,N=l.Ry({title:l.Z_().required(b.validation.title_required),content:l.Z_().required(b.validation.content_required),tags:l.IX().min(1).required(b.validation.atleast_one_tag),files:l.IX()}),[Z,k]=(0,a.useState)(!1),[_,w]=(0,a.useState)(!0),[C,F]=(0,a.useState)(),S=(0,a.useContext)(h.default),T=(0,p.useRouter)();return(0,a.useEffect)(()=>{(null==S?void 0:S.user)?F(null==S?void 0:S.user):F(null),T.refresh()},[]),(0,r.jsx)("div",{children:Z?(0,r.jsx)(v.Z,{}):(0,r.jsxs)("div",{children:[C&&!C.isUserVerified&&_&&(0,r.jsxs)("div",{className:"bg-yellow-400 w-full flex rounded-md",children:[(0,r.jsx)(j.Z,{className:"flex justify-center items-center w-full text-lg font-bold",children:b.main.verify_email}),(0,r.jsx)(o.z,{variant:"ghostNonHover",onClick:()=>w(!1),children:(0,r.jsx)(i.Z.X,{})})]}),(0,r.jsx)("div",{className:"px-4 py-3 md:justify-start",children:(0,r.jsx)(g.Z,{title:b.main.ask_question,size:"sm"})}),(0,r.jsx)(n.J9,{initialValues:{title:"",content:"",files:[],tags:[]},validationSchema:N,onSubmit:(e,t)=>{var s,r;let{setSubmitting:a}=t;k(!0);let{title:n,content:l,tags:i,files:o}=e,c="pa",d=(0,y.e)(n);if("en"===d?c="en":"da"===d&&(c="da"),i=i.map(e=>({id:e.value,name:e.label})),null==S?void 0:S.jwt){let e=null==S?void 0:null===(s=S.jwt)||void 0===s?void 0:s.id,t=null==S?void 0:null===(r=S.jwt)||void 0===r?void 0:r.accessToken;m.Z.discussions.create({title:n,content:l,tags:i,userId:e,lang:c},t).then(e=>{if(o.length>1){let s=new FormData;s.append("id",e.data.id),s.append("entity","Discussions");for(let e=0;e<o.length;e++)s.append("files",o[e]);m.Z.files.uploadFiles(s,t)}(0,f.toast)(b.notify.discussion_added_ok,{hideProgressBar:!0,autoClose:2e3,type:"success"}),k(!1),T.push("/".concat(c,"/question/").concat(e.data.id))}).catch(e=>{k(!1),console.error((0,x.e)(e)),(0,f.toast)((0,x.e)(e),{hideProgressBar:!0,autoClose:2e3,type:"error"})})}else k(!1),(0,f.toast)(b.notify.sign_in_first,{hideProgressBar:!0,autoClose:2e3,type:"error"});a(!1)},children:(0,r.jsxs)(n.l0,{children:[(0,r.jsxs)("div",{className:"relative p-6 flex",children:[(0,r.jsx)("div",{className:"flex justify-center items-center pr-3",children:(0,r.jsx)(i.Z.Pilcrow,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{className:"relative flex-auto",children:[(0,r.jsx)(n.gN,{as:c.Z,name:"title",placeholder:b.main.title}),(0,r.jsx)(n.Bc,{name:"title",component:"div",className:"text-red-500 text-xs"})]})]}),(0,r.jsxs)("div",{className:"relative p-6 flex",children:[(0,r.jsx)("div",{className:"flex justify-center items-center pr-3",children:(0,r.jsx)(i.Z.Pilcrow,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{className:"relative flex-auto border-2 border-grey-500 rounded",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(n.gN,{name:"files",children:e=>{let{form:t,field:s}=e;return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("label",{htmlFor:"button2",title:"Click to upload",className:"cursor-pointer flex items-center gap-4 px-6 py-4",children:[(0,r.jsx)("div",{className:"w-max relative",children:(0,r.jsx)(i.Z.Paperclip,{})}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("span",{className:"block text-base font-semibold relative text-blue-900 dark:text-white group-hover:text-blue-500",children:b.main.upload_files})})]}),(0,r.jsx)("input",{type:"file",name:"button2",id:"button2",hidden:!0,multiple:!0,accept:"image/*,.pdf",onChange:e=>{if(e.target.files){let r=Array.from(e.target.files),a=["image/jpeg","image/png","application/pdf"],n=r.filter(e=>a.includes(e.type));t.setFieldValue(s.name,n),t.setFieldTouched(s.name,!0)}else t.setFieldValue(s.name,[]),t.setFieldTouched(s.name,!0)}}),Array.isArray(t.values.files)&&t.values.files.length>0&&(0,r.jsxs)("div",{className:"mt-2 z-50 bg-gray-100 p-2",children:[(0,r.jsx)("h3",{children:b.main.uploaded_files}),(0,r.jsx)("ul",{className:"flex justify-start items-start",children:t.values.files.map((e,t)=>(0,r.jsxs)("li",{children:[e.name,",",e.type.includes("image/")&&(0,r.jsx)("img",{src:URL.createObjectURL(e),alt:e.name,className:"w-20 h-20"})]},t))}),(0,r.jsx)("button",{type:"button",className:"text-red-500 text-xs underline mt-2",onClick:()=>{t.setFieldValue(s.name,[]),t.setFieldTouched(s.name,!0)},children:b.main.clear_files})]})]})}}),(0,r.jsx)(n.Bc,{name:"files",component:"div",className:"text-red-500 text-xs"})]}),(0,r.jsx)(n.gN,{as:d.Z,name:"content",placeholder:b.main.enter_content,className:"py-2 px-4 h-40 sm:h-56 lg:h-64 resize-none border-2 border-t-gray-500"}),(0,r.jsx)(n.Bc,{name:"content",component:"div",className:"text-red-500 text-xs pt-2"})]})]}),(0,r.jsxs)("div",{className:"relative p-6 flex",children:[(0,r.jsx)("div",{className:"flex justify-center items-center pr-3",children:(0,r.jsx)(i.Z.Tag,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{className:"relative flex-auto",children:[(0,r.jsx)(n.gN,{as:u.Z,name:"tags",options:t,label:b.main.add_tags,placeHolder:b.main.add_tags}),(0,r.jsx)(n.Bc,{name:"tags",component:"div",className:"text-red-500 text-xs pt-2"})]})]}),(0,r.jsx)("div",{className:"flex items-center justify-start mt-10 p-6",children:C&&(0,r.jsxs)(o.z,{type:"submit",disabled:!(null==C?void 0:C.isUserVerified),children:[(0,r.jsx)(i.Z.Send,{})," ",b.main.ask]})})]})})]})})}},1469:function(e,t,s){"use strict";var r=s(7437);t.Z=()=>(0,r.jsxs)("div",{className:"loading-spinner",children:[(0,r.jsx)("div",{className:"spinner"}),"Loading..."]})},9814:function(e,t,s){"use strict";var r=s(7437);s(2265);var a=s(8734),n=s(6230);t.Z=e=>{let{isLoading:t,options:s,name:l,placeHolder:i,...o}=e,[c,d,u]=(0,n.U$)(l);return(0,r.jsx)(a.ZP,{isMulti:!0,name:c.name,options:s,styles:{control:(e,t)=>({...e,border:"none",borderBottom:"2px solid #ccc",borderRadius:0,boxShadow:"none","&:hover":{borderBottomColor:"#999"}}),option:(e,t)=>({...e,padding:"8px 10px"})},classNamePrefix:"select",placeholder:i,value:c.value,onChange:e=>{u.setValue(e)}})}},35:function(e,t,s){"use strict";var r=s(7437),a=s(2265),n=s(6061),l=s(306);let i=(0,n.j)("block py-2.5 px-0 w-full text-sm text-gray-700 bg-transparent border-0 border-b-2 border-gray-200 appearance-none focus:outline-none focus:ring-0 focus:border-b-gray-800 peer");t.Z=a.forwardRef((e,t)=>{let{className:s,children:a,value:n,onChange:o,...c}=e;return(0,r.jsx)("textarea",{className:(0,l.cn)(i({className:s})),ref:t,value:n,onChange:o,...c})})},705:function(e,t,s){"use strict";s.d(t,{e:function(){return r}});let r=e=>{let t=e.charAt(0);return/[a-zA-Z\s]/.test(t)?"en":/[\u0600-\u06FF\s]/.test(t)?"pa":/[\uFB50-\uFDFF\s]/.test(t)?"da":"pa"}},8688:function(e,t,s){"use strict";s.d(t,{e:function(){return r}});let r=e=>{var t,s;let r=null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message;return r[0].message&&(r=r[0].message),r||(r="Something went wrong, Please try again."),r}},75:function(e,t,s){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}s.d(t,{Z:function(){return r}})}},function(e){e.O(0,[150,5,616,697,734,901,478,596,744],function(){return e(e.s=6038)}),_N_E=e.O()}]);